Let(  [    _code_prefix =       "import groovy.json.JsonBuilder¶" &      "import groovy.json.JsonSlurper¶" &      "¶";        _test_value_code =      "if ( _value.isInteger() ) {¶" &      "  _value = _value.toInteger()¶" &      "} else if ( _value.isDouble() ) {¶" &      "  _value = _value.toDouble()¶" &      "} else if ( _value.startsWith( '[' ) ¶" &      "          | _value.startsWith( '{' ) ) {¶" &      "  _value = slurper.parseText( _value )¶" &      "}¶" &      "¶";        _empty_array_code =      "_array = ( _array == null ) ? '[]' : _array¶" &      "¶";        _empty_dict_code =      "_dict = ( _dict == null ) ? '{}' : _dict¶" &      "¶";        _slurp_array_code =      "def slurper = new JsonSlurper()¶" &      "array = slurper.parseText( _array )¶" &      "¶";        _slurp_dict_code =      "def slurper = new JsonSlurper()¶" &      "dict = slurper.parseText( _dict )¶" &      "¶";    //---------------------------------------------------------------    _arry_Add_template = "arry_Add( _array ; _value )";    _arry_Add_code =      _code_prefix &      _empty_array_code &      _slurp_array_code &      _test_value_code &      "array.add(_value)¶" &      "¶" &      "def json = new JsonBuilder(array)¶" &      "¶" &      "return json.toPrettyString()";    _ = RegisterGroovy( _arry_Add_template; _arry_Add_code );    //---------------------------------------------------------------    _arry_Count_template = "arry_Count( _array )";    _arry_Count_code =      _code_prefix &      _empty_array_code &      _slurp_array_code &      "return array.size()";    _ = RegisterGroovy( _arry_Count_template; _arry_Count_code );    //---------------------------------------------------------------    _arry_Value_template = "arry_Value( _array ; _index )";    _arry_Value_code =       _code_prefix &      _empty_array_code &      _slurp_array_code &      "return array[ _index.toInteger() ]";    _ = RegisterGroovy( _arry_Value_template; _arry_Value_code );    //---------------------------------------------------------------    _arry_Head_template = "arry_Head( _array )";    _arry_Head_code =       _code_prefix &      _empty_array_code &      _slurp_array_code &      "return array.head()";    _ = RegisterGroovy( _arry_Head_template; _arry_Head_code );    //---------------------------------------------------------------    _arry_Tail_template = "arry_Tail( _array )";    _arry_Tail_code =       _code_prefix &      _empty_array_code &      _slurp_array_code &      "array = array.tail()¶" &      "def json = new JsonBuilder( array )¶" &      "return json.toPrettyString()";    _ = RegisterGroovy( _arry_Tail_template; _arry_Tail_code );    //---------------------------------------------------------------    _arry_IsEmpty_template = "arry_IsEmpty( _array )";    _arry_IsEmpty_code =       _code_prefix &      _empty_array_code &      _slurp_array_code &      "return array.size == 0";    _ = RegisterGroovy( _arry_IsEmpty_template; _arry_IsEmpty_code );    //---------------------------------------------------------------    _dict_SetValueForKey_template = "dict_SetValueForKey( _dict; _key; _value )";    _dict_SetValueForKey_code =      _code_prefix &      _empty_dict_code &      _slurp_dict_code &      _test_value_code &      "dict[ _key ] = _value¶" &      "¶" &      "def json = new JsonBuilder( dict )¶" &      "¶" &      "return json.toPrettyString()";    _ = RegisterGroovy( _dict_SetValueForKey_template; _dict_SetValueForKey_code );    //---------------------------------------------------------------    _dict_GetValueForKey_template = "dict_GetValueForKey( _dict; _key )";    _dict_GetValueForKey_code =      _code_prefix &      _empty_dict_code &      _slurp_dict_code &      "def value = dict[ _key ]¶" &      "¶" &      "if ( ( value instanceof java.util.Map )¶" &      "   | ( value instanceof java.util.List ) ) {¶" &      "  def json = new JsonBuilder( value )¶" &      "  value = json.toPrettyString()¶" &      "}¶" &      "¶" &      "return value";    _ = RegisterGroovy( _dict_GetValueForKey_template; _dict_GetValueForKey_code );    //---------------------------------------------------------------    _dict_RemoveKey_template = "dict_RemoveKey( _dict; _key )";    _dict_RemoveKey_code =      _code_prefix &      _empty_dict_code &      _slurp_dict_code &      "dict.remove( _key )¶" &      "¶" &      "def json = new JsonBuilder( dict )¶" &      "¶" &      "return json.toPrettyString()";    _ = RegisterGroovy( _dict_RemoveKey_template; _dict_RemoveKey_code );    //---------------------------------------------------------------    _dict_IsEmpty_template = "dict_IsEmpty( _dict )";    _dict_IsEmpty_code =      _code_prefix &      _empty_dict_code &      _slurp_dict_code &      "return dict.count{true} == 0";    _ = RegisterGroovy( _dict_IsEmpty_template; _dict_IsEmpty_code );    //---------------------------------------------------------------    _dict_Count_template = "dict_Count( _dict )";    _dict_Count_code =      _code_prefix &      _empty_dict_code &      _slurp_dict_code &      "return dict.size()";    _ = RegisterGroovy( _dict_Count_template; _dict_Count_code )    //---------------------------------------------------------------  ];  "")